<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 6 English Adventure: Campus Quest</title>
    
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- å¼•å…¥ React å’Œ ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- å¼•å…¥ Babel ç”¨æ–¼è§£æž JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .map-pattern {
            background-image: radial-gradient(#566e56 1px, transparent 1px);
            background-size: 24px 24px;
        }
    </style>
</head>
<body class="bg-slate-100 h-screen overflow-hidden">
    <div id="root" class="h-full"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Icons Components (å…§å»º SVG ä»¥ç¢ºä¿ç„¡éœ€å¤–éƒ¨ä¾è³´) ---
        const Icon = ({ path, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {path}
            </svg>
        );

        const Icons = {
            Map: (props) => <Icon {...props} path={<><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line></>} />,
            School: (props) => <Icon {...props} path={<><path d="M14 22v-4a2 2 0 1 0-4 0v4"></path><path d="m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2"></path><path d="M18 5v17"></path><path d="m4 6 8-4 8 4"></path><path d="M6 5v17"></path><circle cx="12" cy="9" r="2"></circle></>} />,
            Trees: (props) => <Icon {...props} path={<><path d="M12 19V5"></path><path d="M5 19h14"></path><path d="M15 19c0-3.3 2.7-6 6-6"></path><path d="M9 19c0-3.3-2.7-6-6-6"></path><path d="M12 5c3.3 0 6 2.7 6 6"></path><path d="M12 5c-3.3 0-6 2.7-6 6"></path></>} />,
            Utensils: (props) => <Icon {...props} path={<><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"></path><path d="M7 2v20"></path><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"></path></>} />,
            Tent: (props) => <Icon {...props} path={<><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2Z"></path><path d="m9 10 6-6"></path><path d="m5 21 9-9"></path><path d="m19 21-9-9"></path></>} />, // Using box/mountain shape for playground
            BookOpen: (props) => <Icon {...props} path={<><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></>} />,
            Award: (props) => <Icon {...props} path={<><circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline></>} />,
            User: (props) => <Icon {...props} path={<><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></>} />,
            Star: (props) => <Icon {...props} path={<polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>} />,
            Trophy: (props) => <Icon {...props} path={<><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path><path d="M4 22h16"></path><path d="M8 22v-4.19a4 4 0 0 0-2-3.83"></path><path d="M16 22v-4.19a4 4 0 0 1 2-3.83"></path><path d="M12 13v9"></path><path d="M12 3v10"></path></>} />,
            CheckCircle: (props) => <Icon {...props} path={<><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></>} />,
            HelpCircle: (props) => <Icon {...props} path={<><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></>} />,
            X: (props) => <Icon {...props} path={<><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></>} />,
            ChevronRight: (props) => <Icon {...props} path={<polyline points="9 18 15 12 9 6"></polyline>} />
        };

        // --- éŠæˆ²è³‡æ–™ ---
        const locations = [
            {
                id: 1,
                name: "æ ¡é–€å£ (Entrance)",
                x: 10,
                y: 80,
                iconType: "School",
                color: "bg-blue-500",
                topic: "Greetings & Introduction",
                grammar: "Offers & Introductions",
                mission: "æ–°ç”Ÿå°Žè¦½å“¡ï¼šå¤–ç±è€å¸«å‰›æŠµé”ï¼Œçœ‹èµ·ä¾†æœ‰é»žè¿·è·¯ã€‚",
                vocab: ["welcome", "campus", "show you around", "available"],
                level: 1,
                quiz: {
                    question: "å¤–ç±è€å¸«çœ‹è‘—åœ°åœ–ç™¼æ„ã€‚èº«ç‚ºå°Žè¦½å“¡ï¼Œä½ è©²å¦‚ä½•ã€Žä¸»å‹•ä¸”ç¦®è²Œã€åœ°æå‡ºå”åŠ©ï¼Ÿ",
                    options: [
                        "Hi. You are lost. Look at the map.",
                        "Welcome! May I show you around the campus?",
                        "This is a school. It is big.",
                        "Do you want to go home?"
                    ],
                    answer: "Welcome! May I show you around the campus?"
                }
            },
            {
                id: 2,
                name: "ç”Ÿæ…‹æ±  (Eco Pond)",
                x: 25,
                y: 60,
                iconType: "Trees",
                color: "bg-green-500",
                topic: "Weather & Plans",
                grammar: "Making Suggestions",
                mission: "é’è›™çš„é è¨€ï¼šå¤©æ°£çªç„¶è®Šäº†ï¼Œä½ éœ€è¦å»ºè­°åŒå­¸æ”¹è®Šè¨ˆç•«ã€‚",
                vocab: ["humid", "storm", "indoors", "forecast"],
                level: 2,
                quiz: {
                    question: "å¤©ç©ºçƒé›²å¯†å¸ƒä¸”ç©ºæ°£å¾ˆæ‚¶æ¿•ã€‚ä½ å»ºè­°å¤§å®¶æŠŠé‡Žé¤æ”¹åˆ°å®¤å…§ï¼Œé€™æ™‚ä½ æœƒæ€Žéº¼èªªï¼Ÿ",
                    options: [
                        "The frog is green and cute.",
                        "It looks like a storm is coming. Let's stay indoors.",
                        "I like sunny days very much.",
                        "Yesterday was a rainy day."
                    ],
                    answer: "It looks like a storm is coming. Let's stay indoors."
                }
            },
            {
                id: 3,
                name: "ç¦åˆ©ç¤¾ (Cafeteria)",
                x: 45,
                y: 75,
                iconType: "Utensils",
                color: "bg-orange-500",
                topic: "Ordering Food",
                grammar: "Polite Requests",
                mission: "æŽ¡è³¼å¤§ä½œæˆ°ï¼šå¹«å…¨ç­è²·ç‰›å¥¶ï¼Œè¦è¡¨ç¾å‡ºç¦®è²Œã€‚",
                vocab: ["total", "change", "would like", "sold out"],
                level: 3,
                quiz: {
                    question: "è¼ªåˆ°ä½ é»žé¤äº†ã€‚è«‹ç”¨æœ€è‡ªç„¶çš„å£èªžå‘é˜¿å§¨è³¼è²·ä¸‰ç“¶ç‰›å¥¶ï¼Œä¸¦è©¢å•ç¸½é‡‘é¡ã€‚",
                    options: [
                        "I want three milks. Give me.",
                        "Excuse me, I'd like three bottles of milk. How much is the total?",
                        "Three bottles of milk is how many money?",
                        "Do you have milk? I am hungry."
                    ],
                    answer: "Excuse me, I'd like three bottles of milk. How much is the total?"
                }
            },
            {
                id: 4,
                name: "æ“å ´ (Playground)",
                x: 60,
                y: 40,
                iconType: "Tent",
                color: "bg-red-500",
                topic: "Sharing Memories",
                grammar: "Past Events & Feelings",
                mission: "é‹å‹•æœƒå›žæ†¶éŒ„ï¼šå‘æœ‹å‹ç”Ÿå‹•åœ°æè¿°é‚£å ´é©šéšªçš„æ¯”è³½ã€‚",
                vocab: ["intense", "catch up", "cheer", "finally"],
                level: 4,
                quiz: {
                    question: "æœ‹å‹éŒ¯éŽäº†æ¯”è³½ã€‚ä½ èˆˆå¥®åœ°å‘Šè¨´ä»–ï¼Œé›–ç„¶ä¸€é–‹å§‹è½å¾Œï¼Œä½†æœ€å¾Œä½ å€‘é€†è½‰å‹äº†ï¼",
                    options: [
                        "I run fast yesterday and win.",
                        "It was intense! We were behind, but we caught up and won!",
                        "The race is boring and I am tired.",
                        "I will win the race next time."
                    ],
                    answer: "It was intense! We were behind, but we caught up and won!"
                }
            },
            {
                id: 5,
                name: "åœ–æ›¸é¤¨ (Library)",
                x: 35,
                y: 20,
                iconType: "BookOpen",
                color: "bg-purple-500",
                topic: "Explaining Situations",
                grammar: "Past Continuous (Reasons)",
                mission: "æ¶ˆå¤±çš„æ›¸é ï¼šè§£é‡‹ç‚ºä»€éº¼ä½ æ²’è½åˆ°å‰›æ‰çš„å»£æ’­ã€‚",
                vocab: ["absorbed", "focus", "adventure", "realize"],
                level: 5,
                quiz: {
                    question: "åœ–æ›¸é¤¨å“¡æé†’ä½ é–‰é¤¨äº†ã€‚ä½ æŠ±æ­‰åœ°è§£é‡‹ï¼Œå› ç‚ºæ›¸å¤ªå¥½çœ‹äº†ï¼Œè®“ä½ å®Œå…¨ã€Œå¿˜äº†æ™‚é–“ã€ã€‚",
                    options: [
                        "Sorry, I was so absorbed in the story that I lost track of time.",
                        "I am reading a book now.",
                        "The book is very heavy and old.",
                        "I didn't hear you because I was sleeping."
                    ],
                    answer: "Sorry, I was so absorbed in the story that I lost track of time."
                }
            },
            {
                id: 6,
                name: "æ ¡é•·å®¤ (Principal's Office)",
                x: 85,
                y: 15,
                iconType: "Award",
                color: "bg-yellow-500",
                topic: "Aspirations",
                grammar: "Future Plans & Reasons",
                mission: "ç•¢æ¥­çš„æ‰¿è«¾ï¼šä¸åƒ…èªªå‡ºå¤¢æƒ³ï¼Œé‚„è¦è§£é‡‹èƒŒå¾Œçš„ç†±æƒ…ã€‚",
                vocab: ["protect", "environment", "scientist", "passion"],
                level: 6,
                quiz: {
                    question: "æ ¡é•·å•ä½ ç‚ºä»€éº¼æƒ³ç•¶ç§‘å­¸å®¶ï¼Ÿä½ æƒ³è¡¨é”ä½ å°ã€Œè§£æ±ºç’°å¢ƒå•é¡Œã€å¾ˆæœ‰ç†±æƒ…ã€‚",
                    options: [
                        "I am going to be a scientist. It is cool.",
                        "Because my mom wants me to be a scientist.",
                        "I want to contain the pollution.",
                        "I want to be a scientist because I'm passionate about saving the environment."
                    ],
                    answer: "I want to be a scientist because I'm passionate about saving the environment."
                }
            }
        ];

        // --- ä¸»ç¨‹å¼ ---
        function App() {
            const [selectedLocation, setSelectedLocation] = useState(null);
            const [avatarLocation, setAvatarLocation] = useState({ x: 10, y: 80 });
            const [score, setScore] = useState(0);
            const [completedLevels, setCompletedLevels] = useState([]);
            const [quizMode, setQuizMode] = useState(false);
            const [quizStatus, setQuizStatus] = useState('idle');

            useEffect(() => {
                if (selectedLocation) {
                    setAvatarLocation({ x: selectedLocation.x, y: selectedLocation.y });
                    setQuizMode(false);
                    setQuizStatus('idle');
                }
            }, [selectedLocation]);

            const handleStartChallenge = () => {
                setQuizMode(true);
                setQuizStatus('idle');
            };

            const handleAnswerCheck = (option) => {
                if (option === selectedLocation.quiz.answer) {
                    setQuizStatus('correct');
                    if (!completedLevels.includes(selectedLocation.id)) {
                        setScore(prev => prev + 100);
                        setCompletedLevels(prev => [...prev, selectedLocation.id]);
                    }
                } else {
                    setQuizStatus('incorrect');
                    setScore(prev => Math.max(0, prev - 10));
                }
            };

            return (
                <div className="flex flex-col h-screen bg-slate-100 font-sans select-none">
                    {/* Header */}
                    <header className="bg-indigo-600 text-white p-4 shadow-md flex justify-between items-center z-10">
                        <div className="flex items-center gap-3">
                            <div className="bg-indigo-500 p-2 rounded-lg">
                                <Icons.Map className="w-6 h-6" />
                            </div>
                            <div>
                                <h1 className="text-xl font-bold">Campus Quest: Grade 6</h1>
                                <p className="text-indigo-200 text-xs">School Adventure Map</p>
                            </div>
                        </div>
                        
                        <div className="flex items-center gap-4">
                            <div className="flex items-center gap-2 bg-indigo-800/50 px-4 py-2 rounded-xl border border-indigo-400/30">
                                <Icons.Trophy className="w-5 h-5 text-yellow-400" />
                                <div className="flex flex-col items-end leading-none">
                                    <span className="text-xs text-indigo-200 font-medium">SCORE</span>
                                    <span className="text-xl font-bold text-white font-mono">{score}</span>
                                </div>
                            </div>
                            <div className="text-sm bg-indigo-700 px-3 py-1 rounded-full hidden md:block">
                            Level: 6th Grade
                            </div>
                        </div>
                    </header>

                    {/* Main Content Area */}
                    <div className="flex-1 overflow-hidden flex flex-col md:flex-row relative">
                        
                        {/* Left Panel: The Map */}
                        <div className="flex-1 relative bg-[#e3f5e3] overflow-hidden cursor-move group">
                            {/* Map Image Layer */}
                            <img 
                                src="ä¸­æ•™å¤§.png"
                                alt="Campus Map"
                                className="absolute inset-0 w-full h-full object-cover z-0 opacity-60 mix-blend-multiply pointer-events-none"
                                onError={(e) => e.currentTarget.style.display = 'none'}
                            />

                            {/* Map Background Pattern */}
                            <div className="absolute inset-0 opacity-10 pointer-events-none map-pattern"></div>

                            {/* Decorative Terrain Elements */}
                            <div className="absolute top-10 right-10 w-32 h-32 bg-green-200/50 rounded-full blur-2xl"></div>
                            <div className="absolute bottom-20 left-20 w-48 h-48 bg-blue-200/50 rounded-full blur-2xl"></div>

                            {/* Connection Path */}
                            <svg className="absolute inset-0 w-full h-full pointer-events-none drop-shadow-sm">
                                <path d="M10% 80% Q 15% 70%, 25% 60% T 45% 75% T 60% 40% T 35% 20% T 85% 15%" fill="none" stroke="white" strokeWidth="6" strokeLinecap="round" />
                                <path d="M10% 80% Q 15% 70%, 25% 60% T 45% 75% T 60% 40% T 35% 20% T 85% 15%" fill="none" stroke="#94a3b8" strokeWidth="2" strokeDasharray="6 6" strokeLinecap="round" />
                            </svg>

                            {/* Map Nodes */}
                            {locations.map((loc) => {
                                const isCompleted = completedLevels.includes(loc.id);
                                const isSelected = selectedLocation?.id === loc.id;
                                const IconComp = Icons[loc.iconType];
                                
                                return (
                                    <button
                                        key={loc.id}
                                        onClick={() => setSelectedLocation(loc)}
                                        className={`absolute transform -translate-x-1/2 -translate-y-1/2 transition-all duration-500 focus:outline-none group/node z-10
                                            ${isSelected ? 'scale-110 z-20' : 'scale-100 hover:scale-105'}
                                        `}
                                        style={{ left: `${loc.x}%`, top: `${loc.y}%` }}
                                    >
                                        {isCompleted && (
                                            <div className="absolute -top-3 -right-2 z-30 bg-white rounded-full p-0.5 shadow-sm animate-bounce">
                                                <Icons.CheckCircle className="w-5 h-5 text-green-500 fill-green-100" />
                                            </div>
                                        )}
                                        <div className={`
                                            w-14 h-14 rounded-full flex items-center justify-center border-[3px] shadow-lg transition-colors duration-300 relative overflow-hidden
                                            ${isSelected ? 'border-indigo-600 shadow-indigo-200' : 'border-white'}
                                            ${loc.color}
                                        `}>
                                            <div className="relative z-10 transform transition-transform duration-300 group-hover/node:scale-110">
                                                <IconComp className="w-7 h-7 text-white" />
                                            </div>
                                            {!isCompleted && !isSelected && (
                                                <div className="absolute inset-0 bg-white opacity-0 group-hover/node:opacity-20 transition-opacity"></div>
                                            )}
                                        </div>
                                        <div className={`
                                            absolute top-16 left-1/2 transform -translate-x-1/2 px-3 py-1.5 rounded-lg text-xs font-bold whitespace-nowrap shadow-md transition-all
                                            ${isSelected ? 'bg-indigo-600 text-white scale-110' : 'bg-white/90 text-slate-700'}
                                        `}>
                                            {loc.name}
                                        </div>
                                    </button>
                                );
                            })}

                            {/* Student Avatar */}
                            <div 
                                className="absolute transform -translate-x-1/2 -translate-y-1/2 pointer-events-none transition-all duration-1000 ease-in-out z-20 flex flex-col items-center"
                                style={{ left: `${avatarLocation.x}%`, top: `${avatarLocation.y}%` }}
                            >
                                <div className="relative">
                                    <div className="w-12 h-12 bg-white rounded-full border-2 border-indigo-600 shadow-xl flex items-center justify-center relative z-10">
                                        <Icons.User className="w-7 h-7 text-indigo-600" />
                                    </div>
                                    <div className="absolute -bottom-1 left-1/2 -translate-x-1/2 w-8 h-2 bg-black/20 rounded-full blur-sm"></div>
                                </div>
                                <div className="mt-1 bg-indigo-900/80 text-white text-[10px] px-2 py-0.5 rounded-full font-bold">YOU</div>
                            </div>

                            {/* Start/End Markers */}
                            <div className="absolute left-[10%] top-[88%] transform -translate-x-1/2 text-slate-400/80 font-bold text-sm tracking-widest pointer-events-none">START</div>
                            <div className="absolute left-[85%] top-[5%] transform -translate-x-1/2 text-yellow-600/80 font-bold text-sm tracking-widest flex items-center gap-1 pointer-events-none">
                                <Icons.Star className="w-4 h-4 fill-current" /> GOAL
                            </div>
                        </div>

                        {/* Right Panel */}
                        <div className={`
                            absolute md:relative inset-y-0 right-0 w-full md:w-[420px] bg-white shadow-2xl transform transition-transform duration-300 z-30 flex flex-col
                            ${selectedLocation ? 'translate-x-0' : 'translate-x-full md:translate-x-0 md:w-0 md:opacity-0'}
                        `}>
                            {selectedLocation ? (
                                <>
                                    <div className={`relative h-32 ${selectedLocation.color} p-6 flex items-end justify-between overflow-hidden shrink-0`}>
                                        <div className="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"></div>
                                        <div className="absolute bottom-0 left-0 w-24 h-24 bg-black/5 rounded-full translate-y-1/2 -translate-x-1/2"></div>
                                        <div className="relative z-10 text-white">
                                            <div className="flex items-center gap-2 mb-1 opacity-90 text-sm font-medium">
                                                <span>Level {selectedLocation.level}</span>
                                                <span>â€¢</span>
                                                <span>{selectedLocation.topic}</span>
                                            </div>
                                            <h2 className="text-2xl font-bold leading-tight shadow-black/10 drop-shadow-md">{selectedLocation.name}</h2>
                                        </div>
                                        <button 
                                            onClick={() => setSelectedLocation(null)}
                                            className="absolute top-4 right-4 p-2 text-white/70 hover:text-white hover:bg-white/20 rounded-full transition-colors"
                                        >
                                            <Icons.X className="w-6 h-6" />
                                        </button>
                                    </div>

                                    <div className="flex-1 overflow-y-auto bg-slate-50">
                                        {!quizMode ? (
                                            <div className="p-6 space-y-6">
                                                <div className="bg-white p-5 rounded-2xl shadow-sm border border-indigo-50">
                                                    <h3 className="font-bold text-slate-800 mb-3 flex items-center gap-2">
                                                        <div className="p-1.5 bg-yellow-100 rounded-lg">
                                                            <Icons.Star className="w-4 h-4 text-yellow-600 fill-yellow-600" />
                                                        </div>
                                                        Mission Objective
                                                    </h3>
                                                    <p className="text-slate-600 text-sm leading-relaxed pl-1">
                                                        {selectedLocation.mission}
                                                    </p>
                                                </div>
                                                <div className="grid grid-cols-1 gap-4">
                                                    <div className="bg-white p-4 rounded-xl shadow-sm border border-slate-100">
                                                        <h4 className="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">Target Grammar</h4>
                                                        <div className="text-indigo-600 font-medium text-sm bg-indigo-50 p-2 rounded-lg border border-indigo-100">
                                                            {selectedLocation.grammar}
                                                        </div>
                                                    </div>
                                                    <div className="bg-white p-4 rounded-xl shadow-sm border border-slate-100">
                                                        <h4 className="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">Vocabulary</h4>
                                                        <div className="flex flex-wrap gap-2">
                                                            {selectedLocation.vocab.map((word, idx) => (
                                                                <span key={idx} className="px-2.5 py-1 text-xs font-medium text-slate-600 bg-slate-100 rounded-md border border-slate-200">
                                                                    {word}
                                                                </span>
                                                            ))}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        ) : (
                                            <div className="p-6 h-full flex flex-col">
                                                <div className="flex-1">
                                                    <div className="mb-6 flex items-center gap-2 text-indigo-600 font-bold bg-indigo-50 w-fit px-3 py-1 rounded-full text-sm">
                                                        <Icons.HelpCircle className="w-4 h-4" />
                                                        Challenge Quiz
                                                    </div>
                                                    <h3 className="text-lg font-bold text-slate-800 mb-6 leading-relaxed">
                                                        {selectedLocation.quiz.question}
                                                    </h3>
                                                    <div className="space-y-3">
                                                        {selectedLocation.quiz.options.map((option, idx) => {
                                                            let btnClass = "w-full text-left p-4 rounded-xl border-2 transition-all duration-200 font-medium text-sm flex justify-between items-center group ";
                                                            if (quizStatus === 'idle') {
                                                                btnClass += "bg-white border-slate-200 text-slate-600 hover:border-indigo-400 hover:bg-indigo-50";
                                                            } else if (quizStatus === 'correct' && option === selectedLocation.quiz.answer) {
                                                                btnClass += "bg-green-50 border-green-500 text-green-700 shadow-md";
                                                            } else if (quizStatus === 'incorrect' && option === selectedLocation.quiz.answer) {
                                                                btnClass += "bg-green-50 border-green-500 text-green-700 opacity-70"; 
                                                            } else if (quizStatus === 'incorrect' && option !== selectedLocation.quiz.answer) {
                                                                btnClass += "bg-red-50 border-red-200 text-red-400 opacity-50";
                                                            } else {
                                                                btnClass += "bg-white border-slate-100 text-slate-300";
                                                            }

                                                            return (
                                                                <button 
                                                                    key={idx}
                                                                    disabled={quizStatus !== 'idle'}
                                                                    onClick={() => handleAnswerCheck(option)}
                                                                    className={btnClass}
                                                                >
                                                                    <span className="flex-1">{option}</span>
                                                                    {quizStatus === 'correct' && option === selectedLocation.quiz.answer && (
                                                                        <Icons.CheckCircle className="w-5 h-5 text-green-600" />
                                                                    )}
                                                                </button>
                                                            )
                                                        })}
                                                    </div>
                                                    {quizStatus === 'correct' && (
                                                        <div className="mt-6 p-4 bg-green-100 text-green-800 rounded-xl text-center font-bold animate-pulse">
                                                            ðŸŽ‰ Excellent! Mission Complete! (+100 pts)
                                                        </div>
                                                    )}
                                                    {quizStatus === 'incorrect' && (
                                                        <div className="mt-6 p-4 bg-red-100 text-red-800 rounded-xl text-center font-bold">
                                                            ðŸ˜… Oops! Try again carefully. (-10 pts)
                                                        </div>
                                                    )}
                                                </div>
                                            </div>
                                        )}
                                    </div>

                                    <div className="p-4 bg-white border-t border-slate-100">
                                        {!quizMode ? (
                                            <button 
                                                onClick={handleStartChallenge}
                                                className={`w-full ${selectedLocation.color} filter brightness-95 hover:brightness-110 text-white font-bold py-3.5 px-4 rounded-xl shadow-lg transition-all active:scale-95 flex items-center justify-center gap-2`}
                                            >
                                                Start Challenge
                                                <Icons.ChevronRight className="w-5 h-5" />
                                            </button>
                                        ) : (
                                            <div className="flex gap-3">
                                                {quizStatus === 'incorrect' && (
                                                    <button 
                                                        onClick={() => setQuizStatus('idle')}
                                                        className="flex-1 bg-slate-200 hover:bg-slate-300 text-slate-700 font-bold py-3 rounded-xl transition-colors"
                                                    >
                                                        Retry
                                                    </button>
                                                )}
                                                {quizStatus === 'correct' && (
                                                    <button 
                                                        onClick={() => setSelectedLocation(null)}
                                                        className="flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-xl shadow-lg shadow-green-200 transition-colors"
                                                    >
                                                        Continue Journey
                                                    </button>
                                                )}
                                                {quizStatus === 'idle' && (
                                                    <button 
                                                        onClick={() => setQuizMode(false)}
                                                        className="flex-1 bg-white border border-slate-300 hover:bg-slate-50 text-slate-500 font-bold py-3 rounded-xl transition-colors"
                                                    >
                                                        Back to Info
                                                    </button>
                                                )}
                                            </div>
                                        )}
                                    </div>
                                </>
                            ) : (
                                <div className="h-full flex flex-col items-center justify-center text-slate-400 p-8 text-center bg-slate-50/50">
                                    <div className="w-20 h-20 bg-white rounded-full flex items-center justify-center mb-6 shadow-sm border border-slate-100">
                                        <Icons.User className="w-10 h-10 text-slate-300" />
                                    </div>
                                    <h3 className="text-lg font-bold text-slate-600 mb-2">Ready for Adventure?</h3>
                                    <p className="text-sm max-w-[200px]">Click on any location marker on the map to move your character and start a mission.</p>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>